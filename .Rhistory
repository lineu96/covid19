Área Metropollitana Sul,
Área Metropollitana Norte,
Wenceslau Braz,
Jacarezinho,
Cornélio Procópio,
Ibaiti,
Telêmaco Borba,
Ponta Grossa,
Londrina,
Apucarana,
Irati,
Ivaiporã)
dados$Coordenação <- <- tolower(iconv(dados$Coordenação,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Coordenação <- <- tolower(iconv(dados$Coordenação,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Coordenação <- <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados <- readxl::read_xlsx("mun.xlsx")
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Coordenação <- <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados <- readxl::read_xlsx("mun.xlsx")
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Regional <- tolower(iconv(dados$Regional,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Coordenação <- NA
R1 <- c("Litoral",
R1 <- c("Litoral",
"Curitiba",
"Área Metropollitana Sul",
"Área Metropollitana Norte",
"Wenceslau Braz",
"Jacarezinho",
"Cornélio Procópio",
"Ibaiti",
"Telêmaco Borba",
"Ponta Grossa",
"Londrina",
"Apucarana",
"Irati",
"Ivaiporã")
R1 <- tolower(iconv(c("Litoral",
"Curitiba",
"Área Metropollitana Sul",
"Área Metropollitana Norte",
"Wenceslau Braz",
"Jacarezinho",
"Cornélio Procópio",
"Ibaiti",
"Telêmaco Borba",
"Ponta Grossa",
"Londrina",
"Apucarana",
"Irati",
"Ivaiporã")))
R1
R2 <- tolower(iconv(c("Loanda",
"Paranavaí",
"Maringá",
"Cianorte",
"Umuarama",
"Goioerê",
"Campo Mourão",
"Pitanga",
"Ivaiporã",
"Assis Chateaubriand")))
R2
R3 <- tolower(incov(c("União da Vitória",
"Guarapuava",
"Pato Branco",
"Francisco Beltrão",
"Dois Vizinhos",
"Laranjeiras do Sul",
"Foz do Iguaçu",
"Cascavel",
"Toledo")))
R3 <- tolower(iconv(c("União da Vitória",
"Guarapuava",
"Pato Branco",
"Francisco Beltrão",
"Dois Vizinhos",
"Laranjeiras do Sul",
"Foz do Iguaçu",
"Cascavel",
"Toledo")))
dados$Coordenação <- NA
ifelse(dados$Regional in R1, 'R1', dados$Regional)
dados$Regional in R1
dados$Regional %in% R1
ifelse(dados$Regional %in% R1, 'R1', dados$Regional)
dados$Coordenação <- ifelse(dados$Regional %in% R1, 'R1',dados$Coordenação)
dados$Coordenação <- ifelse(dados$Regional %in% R3, 'R3',dados$Coordenação)
dados$Coordenação
dados
length(R1)
length(R2)
length(R3)
14+10+19
14+10+9
dados$Regional
levels(dados$Regional)
levels(factor(dados$Regional))
dados
dados$Coordenação
length(R1)+length(R2)+length(R3)
length(R1)+length(R2)+length(R3)
levels(factor(dados$Regional))
length(levels(factor(dados$Regional)))
length(R1)+length(R2)+length(R3)
length(levels(factor(dados$Regional)))
as.data.frame(dados
)
as.data.frame(dados
)
R1 <- tolower(iconv(c("Paranaguá",
"Curitiba",
"Área Metropollitana Sul",
"Área Metropollitana Norte",
"Wenceslau Braz",
"Jacarezinho",
"Cornélio Procópio",
"Ibaiti",
"Telêmaco Borba",
"Ponta Grossa",
"Londrina",
"Apucarana",
"Irati",
"Ivaiporã")))
R1
dados$Regional
dados$Regional %in% R1
sum(is.na(as.data.frame(dados)))
dados <- readxl::read_xlsx("mun.xlsx")
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Municípios
dados$Regional <- tolower(iconv(dados$Regional,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Regional
dados <- readxl::read_xlsx("mun.xlsx")
dados
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Regional <- tolower(iconv(dados$Regional,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
load('maps/prmu.RData')
load('prmu.RData')
prmu@data$CD_GEOCMU
prmu@data$CD_GEOCMU
prmu@data$NM_MUNICIP
prmu@data$NM_MUNICIP <- tolower(iconv(prmu@data$NM_MUNICIP,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
prmu@data$NM_MUNICIP
dados$Municípios
prmu@data <- dplyr::left_join(prmu@data,
dados,
by=c('NM_MUNICIP' = 'Municípios'))
prmu@data
nrow(prmu@data)
prmu@data$Regional
is.na(prmu@data$Regional)
sum(is.na(prmu@data$Regional))
subset(prmu@data, is.na(prmu@data))
dados <- readxl::read_xlsx("mun.xlsx")
nrow(dados)
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Regional <- tolower(iconv(dados$Regional,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
load('prmu.RData')
prmu@data$NM_MUNICIP <- tolower(iconv(prmu@data$NM_MUNICIP,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
sort(prmu@data$NM_MUNICIP)
sort(prmu@data$NM_MUNICIP)
sort(dados$Municípios)
sort(prmu@data$NM_MUNICIP) == sort(dados$Municípios)
sum(sort(prmu@data$NM_MUNICIP) == sort(dados$Municípios))
sort(prmu@data$NM_MUNICIP)[c(34, 127)]
sort(dados$Municípios))[c(34, 127)]
sort(dados$Municípios)[c(34, 127)]
dados <- readxl::read_xlsx("mun.xlsx")
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Regional <- tolower(iconv(dados$Regional,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
load('prmu.RData')
prmu@data$NM_MUNICIP <- tolower(iconv(prmu@data$NM_MUNICIP,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
sort(prmu@data$NM_MUNICIP)[c(34, 127)]
sort(dados$Municípios)[c(34, 127)]
sort(prmu@data$NM_MUNICIP)[c(34, 127)] == sort(dados$Municípios)[c(34, 127)]
sort(prmu@data$NM_MUNICIP) == sort(dados$Municípios)
sum(sort(prmu@data$NM_MUNICIP) == sort(dados$Municípios))
prmu@data <- dplyr::left_join(prmu@data,
dados,
by=c('NM_MUNICIP' = 'Municípios'))
subset(prmu@data, is.na(prmu@data))
prmu_tidy <- broom::tidy(prmu_)
prmu_tidy <- broom::tidy(prmu)
prmu$id <- row.names(prmu)
prmu_tidy <- left_join(prmu_tidy, prmu@data)
??left_join
library(tidyverse)
prmu_tidy <- left_join(prmu_tidy, prmu@data)
ggplot(prmu_tidy,
aes_string(x = 'long', y = 'lat', group = 'group',
#fill = prmu_conf_tidy[,11])) +
fill = 'Coordenações')
)
ggplot(prmu_tidy,
aes_string(x = 'long', y = 'lat', group = 'group',
#fill = prmu_conf_tidy[,11])) +
fill = 'Coordenações')) +
geom_polygon(color = "black", size = 0.1)
ggplot(prmu_tidy,
aes_string(x = 'long', y = 'lat', group = 'group',
#fill = prmu_conf_tidy[,11])) +
fill = 'Coordenações')) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()
ggplot(prmu_tidy,
aes_string(x = 'long', y = 'lat', group = 'group',
#fill = prmu_conf_tidy[,11])) +
fill = 'Coordenações')) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000",
"#B45F04", "#61380B"),
labels = levels(prmu_totalCases_cat_tidy$`2020-03-12`),
drop = FALSE)+
theme(legend.title=element_blank(),
plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes_string(x = 'long', y = 'lat', group = 'group',
#fill = prmu_conf_tidy[,11])) +
fill = 'Coordenações')) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')
ggplot(prmu_tidy,
aes_string(x = 'long', y = 'lat', group = 'group',
#fill = prmu_conf_tidy[,11])) +
fill = 'Coordenações')) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000")
)
prmu_tidy$Coordenações <- as.factor(prmu_tidy$Coordenações)
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000")),
labels = levels(prmu_tidy$Regional),
drop = FALSE)
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"),
labels = levels(prmu_tidy$Regional),
drop = FALSE)
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"))+
theme(legend.title=element_blank(),
plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
dados <- readxl::read_xlsx("mun.xlsx")
dados$Municípios <- tolower(iconv(dados$Municípios,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
dados$Regional <- tolower(iconv(dados$Regional,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
load('prmu.RData')
prmu@data$NM_MUNICIP <- tolower(iconv(prmu@data$NM_MUNICIP,
to ='ASCII//TRANSLIT',
from = "UTF-8"))
sum(sort(prmu@data$NM_MUNICIP) == sort(dados$Municípios))
prmu@data <- dplyr::left_join(prmu@data,
dados,
by=c('NM_MUNICIP' = 'Municípios'))
plot(prmu)
prmu_tidy <- broom::tidy(prmu)
prmu$id <- row.names(prmu)
prmu_tidy <- left_join(prmu_tidy, prmu@data)
prmu_tidy$Coordenações <- as.factor(prmu_tidy$Coordenações)
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = "black", size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
dados$Coordenações
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FFFFFF", "#F7BE81", "#FF8000"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#08088A", "#8181F7", "#2E9AFE"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#2E9AFE"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = 1, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações,
alpha = 0.4)) +
geom_polygon(color = 1, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
,
alpha = 0.4) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = 1, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_bw()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_void()+
labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_void()+
#labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggsave(filename='mapaPR',
plot=g, device="png",
path=paste0("fig/gif_pr/casos"),
dpi=500, height = 7, width = 7)
g<-ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = NA, size = 0.1) +
coord_equal() +
theme_void()+
#labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggsave(filename='mapaPR',
plot=g, device="png",
path=paste0("fig/gif_pr/casos"),
dpi=500, height = 7, width = 7)
ggsave(filename='mapaPR',
plot=g, device="png",
dpi=500, height = 7, width = 7)
g<-ggplot(prmu_tidy,
aes(x = long, y = lat, group = group,
fill = Coordenações)) +
geom_polygon(color = 1, size = 0.1) +
coord_equal() +
theme_void()+
#labs(title = 'Título')+
scale_fill_manual(values = c("#FE2E2E", "#0101DF", "#0B6138"))+
theme(plot.title = element_text(size=22))+
theme(plot.title = element_text(hjust = 0.5))
ggsave(filename='mapaPR2',
plot=g, device="png",
dpi=500, height = 7, width = 7)
setwd("~/covid19")
rmarkdown::render_site()
